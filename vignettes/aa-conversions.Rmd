---
title: "aa-conversions"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{aa-conversions}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(parquetize)
```



2 fonctions :

csv_to_parquet : pratique avec plusieurs argument from URL avec ou sans zip

table_to_parquet : pour tous les formats de données (la fonction devine le format du fichier à l'aide de son extension)

Arguments 

chunk_size
compression
et compression_level

Plusieurs cas de figure : 

Petits fichiers en entrée et fichier parquet unique en sortie

```{r}
table_to_parquet(
  path_to_table = system.file("examples","iris.sas7bdat", package = "haven"),
  path_to_parquet = "Data"
)
```

```{r}
table_to_parquet(
  path_to_table = "https://www.insee.fr/fr/statistiques/fichier/3568617/equip-tour-transp-infra-2021.zip",
  path_to_parquet = "Data"
)
```

Gros fichiers en entrée et fichier parquet unique en sortie

```{r}
table_to_parquet(
  path_to_table = system.file("examples","iris.sas7bdat", package = "haven"),
  path_to_parquet = "Data",
  nb_rows = 50
)
```

Gros fichiers en entrée et fichier parquet partitionnés en sortie

```{r}
table_to_parquet(
  path_to_table = system.file("examples","iris.sas7bdat", package = "haven"),
  path_to_parquet = "Data",
  partition = "yes",
  partitioning =  c("Species")
)
```

table_to_parquet(
  path_to_table = system.file("examples","iris.sas7bdat", package = "haven"),
  path_to_parquet = "Data",
  partition = "yes",
  partitioning =  c("Species")
)

table_to_parquet(
  path_to_table = system.file("examples","iris.sas7bdat", package = "haven"),
  path_to_parquet = "Data",
  nb_rows = 50,
  partition = "yes",
  partitioning =  c("Species")
)

